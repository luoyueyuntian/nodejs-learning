### 什么是nodejs
js遵循ECMA标准，该标准定义了一些基本的语法。当js运行在浏览器环境时，浏览器提供了BOM、DOM相关的api，可以通过js去控制浏览器和DOM，如果js运行在服务器，就需要使用node，nodejs使用仍然是与js完全一致的语法，但不再提供BOM和DOM，而是提供了一些列I/O操作的api，可以操作文件和网络数据。nodejs可以对进程线程进行控制，拥有较高的权限，不同于浏览器为了安全对权限做了严格限制，nodejs可以做很多事情，处理二进制文件，发送邮件等等，在前端开发构建中得到广泛应用，还有一个很重要的应用场景就是使用node开发web服务器。

### node适用于I/O密集的场景
计算密集型任务的特点是要进行大量的计算，执行大量的指令，涉及到网络、磁盘I/O的任务都是I/O密集型任务。一般一个程序既有计算任务，又有I/O任务，当计算任务多于I/O任务时，我们称为计算密集型，反之则为I/O密集型。因为js是动态类型语言，变量的类型只有在运行的时候才可以确定，而每种类型的操作都对应不同的硬件，所以编译器无法使用流水线对其进行优化，因此其性能一般不如静态编程语言。但是js是基于事件的异步非阻塞的，所以对于I/O操作，在等待I/O操作完成前这段时间可以执行其他代码，所以其I/O的性能比较好。

### node是基于事件驱动的
js是基于事件驱动的，对于异步任务都是通过回调来处理的，对于熟悉异步编程的人，这个不是什么问题，但对于不熟悉异步编程的人来说，这个可能需要一段时间来适应。异步编程的一个挑战是很多代码执行的顺序是不确定的，因为异步任务执行所需的时间是不确定的，所以最后事件触发的顺序也是不确定的，如果处理不好，会引发很多严重的问题。

## 如何学习nodejs
如果只是跟着现有的一些框架开发文档去做一些小的项目，并不算学习了nodejs，目前现有的框架都是针对特定领域，其实nodejs能做的东西是很多的，如果不去仔细地了解这些内容，那只能算学习了某某框架，而不能算学习了nodejs。

nodejs具有哪些能力，体现在了nodejs提供了哪些api。所以如果要学习nodejs，一定要去了解有哪些api。

如果是你做前端开发，那么学习nodejs，语法方面不会有问题，因为完全一样，但这并不意味着nodejs会很轻松。我曾经也是把nodej的api文档一遍一遍的看，但是发现很多计算机术语没有接触过，理解起来非常吃力。比如进程中的ipc、端口、信号，再比如fs模块中的fd有什么用，为什么有的操作文件的api在使用前要先open文件，操作完了后在close文件，有的则不需要，诸如此类的问题都会困扰我很长时间。我也和身边同样是做前端开发的同事了解过，发现也是看不进去。对于这些不清楚的问题，我当然可以通过搜索引擎去搜索相关资料，也许有的问题可以得到解答，有的问题却不一定能得不到解答。

我从17年开始看nodejs api文档，看的时候也是对每个模块的api进行分类，但api的数量实在是太多了，只能大概知道某些api能做什么东西，但是什么时候用什么api也是搞不清楚。直到19年我在网上看到了一篇关于操作系统的学习笔记，里面主要将了文件系统，我之前看nodejs操作文件的模块，有些api会有样例，有些没有，我发现其中有些api在使用前需要先open文件，这个问题困扰我很长时间，而这篇博客正好解释清楚了这个问题，这让我我意识到学习nodejs是需要操作系统相关知识打底的，于是我开始学习去看《深入理解计算机系统》这本书，这本书非常厚，但作者讲的比较好，在豆瓣上有很高的评价，我个人也非常喜欢这本书，虽然看起来非常痛苦。由于内容太多，我跳过了第二章——信息的表示和处理，因为里面将的内容实在是太枯燥了，但其他内容基本上也大致都了解到了。虽然说没有很细致的去了解所有内容，但仍然收获非常大，以前很多不太能理解的内容，现在也能够理解了。后面再继续看nodejs 的 api文档时，感觉轻松了很多。

nodejs里面涉及到网络请求的部门内容也需要网络协议的相关知识打底，最起码你要知道udp、tcp的区别，https相关的内容、dns是做什么的，常见请求头等等，好在网络协议的相关内容并不是太难，也比较容易掌握。

我建议如果你再看nodejs 的 api 文档时，也和我有类似的困扰，建议先学习下操作系统和网络协议相关知识，有了这些知识打底后，学习起来效率会高很多。

nodejs的模块划分是很清晰的，学习前，应该大概了解下每个模块讲的什么内容，比如`module - 模块`里面将的是nodejs模块化是什么样的，如何导入一个模块，如何导出一个模块，这个是比较基本的内容，你只要用nodejs，就必定会涉及到，所以这个应该要优先学习。比如你要学习操纵文件，操作文件使用的是`fs - 文件系统`模块，操作文件有涉及到路径问题，需要了解`path - 路径`模块（可以晚点看），fs里面很多是实现了`stream（流）`接口，所以也需要去了解流的相关内容，当然流本身也比较复杂，也可以稍微晚点看。读文件设计到二进制流，涉及到`Buffer`，这个也需要去看。nodejs的I/O操作全部都是基于事件，但事件这个比较好理解，尤其是前端开发人员，所以基本不看也不会造成很大的障碍。然后可以看下`readline（逐行读取）`，特定情况下读取文件会很方便。文件的内容差不多就这些，了解这些后，你就可以写一些小工具之类的东西。如果要用nodejs去做服务端的东西，则要了解网络接口，首先是`net（网络）`模块，我们所用到的http等等都与这个有关，然后要确保看完了之前提到的`stream（流）`模块，因为我们紧接着要看的`http`里面跟流密切相关，并且有些api的说明都是直接让读者参考stream的内容，这里我们还需要一些网络协议的知识打底，比如你要直到tcp和upd的区别，知道一些常见的请求头是做什么的。了解完了流相关的内容，再接着看`http`，这里面是涉及到服务端技术最主要的模块，其实`udp`目前来说用的都不太多，学到这里，大概就能看懂大部分框架的代码。后面接着可以看加密、压缩、诸如`querystring（查询字符串）`、`url（URL）`等工具类。接着要先把一些全局公用模块熟悉下，如`global（全局变量）`、`console（控制台）`、`timer（定时器）`等等。后面可以看下进程、线程相关的知识，比如：`process（进程）`、`child_process（子进程）`、`worker_threads（工作线程）`、`os（操作系统）`等等，到这里，基本上主要的常用的模块都已经涉及到了，后面就可以根据需求补下：`Error（错误）`、`events（事件触发器）`、`dns（域名服务器）`、`ty（终端）`、`debugger（调试器）`、`https（HTTPS）`、`dgram（数据报）`、`assert（断言）`、`http2`、`v8`等等。基本上前面提到的操作文件和操作网络接口都会涉及多个模块，需要一些知识打底，所以建议按照模块依赖关系去学习，其他的模块依赖性不是太大，可以单独学，也可以在任何阶段学，推荐当你学习过程中涉及到的时候，再投入精力学，这样刚好可以学以致用。
